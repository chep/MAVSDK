syntax = "proto3";

package mavsdk.rpc.lumos_server;

import "mavsdk_options.proto";

service LumosServerService {
    rpc SetDroneInfo(SetDroneInfoRequest) returns(SetDroneInfoResponse) {option (mavsdk.options.async_type) = SYNC;}
    rpc SetCompanionStatus(SetCompanionStatusRequest) returns(SetCompanionStatusResponse) {option (mavsdk.options.async_type) = SYNC;}
    rpc SubscribeDance(SubscribeDanceRequest) returns(stream DanceResponse) {}
}

message SetDroneInfoRequest {
    DroneInfo drone_info = 1;
}

message SetDroneInfoResponse {
}

message SetCompanionStatusRequest {
    CompanionStatus drone_info = 1;
}

message SetCompanionStatusResponse {
}

message SubscribeDanceRequest {}
message DanceResponse{
    Dance dance = 1;
}

message Dance {
    repeated uint32 data = 1;
    uint32 len = 2;
}

message LumosResult {
    // Possible results returned for commands
    enum Result {
        RESULT_SUCCESS = 0;
        RESULT_ERROR = 1;
    }
    Result result = 1; // Result enum value
    string result_str = 2; // Human-readable English string describing the result
}

message DroneInfo {
	string uuid = 7; /*<  uuid*/
	uint32 fw_major = 8; /*<  Firmware version major (first byte)*/
	uint32 fw_minor = 9; /*<  Firmware version minor (second byte)*/
	uint32 fw_patch = 10; /*<  Firmware version patch (third byte)*/
}

message CompanionStatus {
	uint32 dance_status = 1;
	uint32 rssi_wifi = 2;
	uint32 rssi_xbee = 3;
}
